---
import { getPortfolioData } from "@/utils/data";
import TimelineCard from "@/components/TimelineCard";
import BoxReveal from "@/components/ui/box-reveal";

const { companies, education } = getPortfolioData();

const workItems = companies
	.map((c) => ({
		id: c.id,
		title: c.position,
		subTitle: c.name,
		date: c.year,
		startDate: c.startDate,
		endDate: c.endDate,
		type: "work" as const,
	}))
	.sort((a, b) => new Date(b.startDate).getTime() - new Date(a.startDate).getTime());

const educationItems = education
	.map((e) => ({
		title: e.degree || e.title,
		subTitle: e.institution,
		date: e.year,
		startDate: e.startDate,
		endDate: e.endDate,
		type: "education" as const,
	}))
	.sort((a, b) => new Date(b.startDate).getTime() - new Date(a.startDate).getTime());
---

<section class="py-10 md:py-20">
	<div class="container mx-auto">
		<div class="grid gap-12 lg:grid-cols-2">
			<div class="flex flex-col gap-8">
				<BoxReveal boxColor="bg-primary-500" duration={0.5} client:idle>
					<h2 class="font-basement text-3xl md:text-4xl">Experience</h2>
				</BoxReveal>

				<div class="flex flex-col gap-4">
					{
						workItems.map((item, index) => (
							<a href={`/work/${item.id}`} style="text-decoration: none;">
								<TimelineCard {...item} delay={index * 0.1} client:load />
							</a>
						))
					}
				</div>
			</div>

			<div class="flex flex-col gap-8">
				<BoxReveal boxColor="bg-secondary-400" duration={0.5} client:idle>
					<h2 class="font-basement text-3xl md:text-4xl">Education</h2>
				</BoxReveal>

				<div class="flex flex-col gap-4">
					{
						educationItems.map((item, index) => (
							<TimelineCard {...item} delay={index * 0.1} client:load />
						))
					}
				</div>
			</div>
		</div>
	</div>
</section>
