---
import { getPortfolioData } from "@/utils/data";
import TestimonialCard from "@/components/TestimonialCard";
import { Heading } from "@/components/ui/heading";
import Button from "@/components/ui/Button";

const { testimonials } = await getPortfolioData();
const { showAll = false } = Astro.props;
---

<section class="clip5 bg-white py-20 dark:bg-neutral-800" id="testimonials">
	<div class="container mx-auto px-4">
		<Heading
			level="h2"
			gradient
			floating
			backplate
			client:idle
			subtitle="Testimonials from clients and colleagues"
		>
			What People Say
		</Heading>

		<div class="grid grid-cols-1 gap-8 md:grid-cols-2">
			{
				(showAll ? testimonials : testimonials.sort((a, b) => b.id - a.id).slice(0, 6)).map(
					(testimonial) => <TestimonialCard {...testimonial} client:idle />
				)
			}
		</div>
		{
			showAll ? null : (
				<div class="mt-12 text-center">
					<Button href="/about/#testimonials" text="View All Testimonials â†’" variant="secondary" />
				</div>
			)
		}
	</div>
</section>
