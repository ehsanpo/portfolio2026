---
import { getPortfolioData } from "../../utils/data";
const { skills } = await getPortfolioData();
---

<div class="relative inline-block">
	<button
		id="skillsInfoButton"
		class="flex h-6 w-6 items-center justify-center rounded-full bg-gray-200 text-gray-600 transition-colors hover:bg-gray-300 dark:bg-neutral-700 dark:text-gray-300 dark:hover:bg-gray-600"
		aria-label="Show skills level explanation"
	>
		!
	</button>
	<div
		id="skillsExplanation"
		class="absolute top-8 left-0 z-10 hidden w-80 rounded-lg bg-white p-4 shadow-lg dark:bg-neutral-800"
	>
		<h4 class="mb-2 font-semibold text-gray-900 dark:text-white">Skill Levels Explained</h4>
		<ul class="space-y-2">
			{
				skills.map(({ range, description }) => (
					<li class="text-sm">
						<span class="font-medium text-gray-900 dark:text-white">{range}:</span>
						<span class="text-gray-600 dark:text-gray-400"> {description}</span>
					</li>
				))
			}
		</ul>
	</div>
</div>

<script>
	const button = document.getElementById("skillsInfoButton");
	const explanation = document.getElementById("skillsExplanation");

	button?.addEventListener("click", () => {
		explanation?.classList.toggle("hidden");
	});

	document.addEventListener("click", (event) => {
		if (!button?.contains(event.target as Node) && !explanation?.contains(event.target as Node)) {
			explanation?.classList.add("hidden");
		}
	});
</script>
